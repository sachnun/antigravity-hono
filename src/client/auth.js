export const clientScript = `var Oe=Object.defineProperty;var vt=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var gt=(e,t)=>{for(var r in t)Oe(e,r,{get:t[r],enumerable:!0})};var N=(e,t,r)=>vt(e,typeof t!="symbol"?t+"":t,r);var T={Stringify:1,BeforeStream:2,Stream:3},w=(e,t)=>{let r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},ht=/[&<>'"]/,pe=async(e,t)=>{let r="";t||(t=[]);let n=await Promise.all(e);for(let a=n.length-1;r+=n[a],a--,!(a<0);a--){let s=n[a];typeof s=="object"&&t.push(...s.callbacks||[]);let o=s.isEscaped;if(s=await(typeof s=="object"?s.toString():s),typeof s=="object"&&t.push(...s.callbacks||[]),s.isEscaped??o)r+=s;else{let c=[r];O(s,c),r=c[0]}}return w(r,t)},O=(e,t)=>{let r=e.search(ht);if(r===-1){t[0]+=e;return}let n,a,s=0;for(a=r;a<e.length;a++){switch(e.charCodeAt(a)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t[0]+=e.substring(s,a)+n,s=a+1}t[0]+=e.substring(s,a)},ve=e=>{let t=e.callbacks;if(!t?.length)return e;let r=[e],n={};return t.forEach(a=>a({phase:T.Stringify,buffer:r,context:n})),r[0]},q=async(e,t,r,n,a)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let s=e.callbacks;if(!s?.length)return Promise.resolve(e);a?a[0]+=e:a=[e];let o=Promise.all(s.map(c=>c({phase:t,buffer:a,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(f=>q(f,t,!1,n,a))).then(()=>a[0]));return r?w(await o,s):o};var P=Symbol("RENDERER"),L=Symbol("ERROR_HANDLER"),v=Symbol("STASH"),ee=Symbol("INTERNAL"),te=Symbol("MEMO");var ge=e=>(e[ee]=!0,e);var he=e=>({value:t,children:r})=>{if(!r)return;let n={children:[{tag:ge(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?n.children.push(...r.flat()):n.children.push(r),n.children.push({tag:ge(()=>{e.pop()}),props:{}});let a={tag:"",props:n,type:""};return a[L]=s=>{throw e.pop(),s},a},G=e=>{let t=[e],r=he(t);return r.values=t,r.Provider=r,I.push(r),r};var I=[],re=e=>{let t=[e],r=(n=>{t.push(n.value);let a;try{a=n.children?(Array.isArray(n.children)?new Ie("",{},n.children):n.children).toString():""}finally{t.pop()}return a instanceof Promise?a.then(s=>w(s,s.callbacks)):w(a)});return r.values=t,r.Provider=r,r[P]=he(t),I.push(r),r},C=e=>e.values.at(-1);var W={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},ye={},z="data-precedence";var be=e=>Array.isArray(e)?e:[e];var xt=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),F=e=>xt.get(e)||e,ae=(e,t)=>{for(let[r,n]of Object.entries(e)){let a=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,s=>\`-\${s.toLowerCase()}\`);t(a,n==null?null:typeof n=="number"?a.match(/^(?:a|border-im|column(?:-c|s)|flex(?:\$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty\$/)?\`\${n}\`:\`\${n}px\`:n)}};var je=void 0;var Et=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)\$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-\$1").toLowerCase():e,wt=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],St=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],xe=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let a=e[r];if(typeof a=="string")O(a,t);else{if(typeof a=="boolean"||a===null||a===void 0)continue;a instanceof ne?a.toStringToBuffer(t):typeof a=="number"||a.isEscaped?t[0]+=a:a instanceof Promise?t.unshift("",a):xe(a,t)}}},ne=class{constructor(e,t,r){N(this,"tag");N(this,"props");N(this,"key");N(this,"children");N(this,"isEscaped",!0);N(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let e=[""];this.localContexts?.forEach(([t,r])=>{t.values.push(r)});try{this.toStringToBuffer(e)}finally{this.localContexts?.forEach(([t])=>{t.values.pop()})}return e.length===1?"callbacks"in e?ve(w(e[0],e.callbacks)).toString():e[0]:pe(e,e.callbacks)}toStringToBuffer(e){let t=this.tag,r=this.props,{children:n}=this;e[0]+=\`<\${t}\`;let a=je&&C(je)==="svg"?s=>Et(F(s)):s=>F(s);for(let[s,o]of Object.entries(r))if(s=a(s),s!=="children"){if(s==="style"&&typeof o=="object"){let c="";ae(o,(f,l)=>{l!=null&&(c+=\`\${c?";":""}\${f}:\${l}\`)}),e[0]+=' style="',O(c,e),e[0]+='"'}else if(typeof o=="string")e[0]+=\` \${s}="\`,O(o,e),e[0]+='"';else if(o!=null)if(typeof o=="number"||o.isEscaped)e[0]+=\` \${s}="\${o}"\`;else if(typeof o=="boolean"&&St.includes(s))o&&(e[0]+=\` \${s}=""\`);else if(s==="dangerouslySetInnerHTML"){if(n.length>0)throw new Error("Can only set one of \`children\` or \`props.dangerouslySetInnerHTML\`.");n=[w(o.__html)]}else if(o instanceof Promise)e[0]+=\` \${s}="\`,e.unshift('"',o);else if(typeof o=="function"){if(!s.startsWith("on")&&s!=="ref")throw new Error(\`Invalid prop '\${s}' of type 'function' supplied to '\${t}'.\`)}else e[0]+=\` \${s}="\`,O(o.toString(),e),e[0]+='"'}if(wt.includes(t)&&n.length===0){e[0]+="/>";return}e[0]+=">",xe(n,e),e[0]+=\`</\${t}>\`}};var Ie=class extends ne{toStringToBuffer(e){xe(this.children,e)}};var fe={};gt(fe,{button:()=>ct,clearCache:()=>Mt,composeRef:()=>ue,form:()=>ot,input:()=>lt,link:()=>nt,meta:()=>at,script:()=>tt,style:()=>rt,title:()=>et});var X="_hp",kt={Change:"Input",DoubleClick:"DblClick"},Ct={svg:"2000/svg",math:"1998/Math/MathML"},R=[],we=new WeakMap,U=void 0,Ke=()=>U,D=e=>"t"in e,Ee={onClick:["click",!1]},Be=e=>{if(!e.startsWith("on"))return;if(Ee[e])return Ee[e];let t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?\$/);if(t){let[,r,n]=t;return Ee[e]=[(kt[r]||r).toLowerCase(),!!n]}},_e=(e,t)=>U&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-\$1").toLowerCase():t,Rt=(e,t,r)=>{t||(t={});for(let n in t){let a=t[n];if(n!=="children"&&(!r||r[n]!==a)){n=F(n);let s=Be(n);if(s){if(r?.[n]!==a&&(r&&e.removeEventListener(s[0],r[n],s[1]),a!=null)){if(typeof a!="function")throw new Error(\`Event handler for "\${n}" is not a function\`);e.addEventListener(s[0],a,s[1])}}else if(n==="dangerouslySetInnerHTML"&&a)e.innerHTML=a.__html;else if(n==="ref"){let o;typeof a=="function"?o=a(e)||(()=>a(null)):a&&"current"in a&&(a.current=e,o=()=>a.current=null),we.set(e,o)}else if(n==="style"){let o=e.style;typeof a=="string"?o.cssText=a:(o.cssText="",a!=null&&ae(a,o.setProperty.bind(o)))}else{if(n==="value"){let c=e.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(e.value=a==null||a===!1?null:a,c==="TEXTAREA"){e.textContent=a;continue}else if(c==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(n==="checked"&&e.nodeName==="INPUT"||n==="selected"&&e.nodeName==="OPTION")&&(e[n]=a);let o=_e(e,n);a==null||a===!1?e.removeAttribute(o):a===!0?e.setAttribute(o,""):typeof a=="string"||typeof a=="number"?e.setAttribute(o,a):e.setAttribute(o,a.toString())}}}if(r)for(let n in r){let a=r[n];if(n!=="children"&&!(n in t)){n=F(n);let s=Be(n);s?e.removeEventListener(s[0],a,s[1]):n==="ref"?we.get(e)?.():e.removeAttribute(_e(e,n))}}},At=(e,t)=>{t[v][0]=0,R.push([e,t]);let r=t.tag[P]||t.tag,n=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,n)]}finally{R.pop()}},qe=(e,t,r,n,a)=>{e.vR?.length&&(n.push(...e.vR),delete e.vR),typeof e.tag=="function"&&e[v][1][H]?.forEach(s=>a.push(s)),e.vC.forEach(s=>{if(D(s))r.push(s);else if(typeof s.tag=="function"||s.tag===""){s.c=t;let o=r.length;if(qe(s,t,r,n,a),s.s){for(let c=o;c<r.length;c++)r[c].s=!0;s.s=!1}}else r.push(s),s.vR?.length&&(n.push(...s.vR),delete s.vR)})},Tt=e=>{for(;;e=e.tag===X||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==X&&e.e)return e.e}},Ge=e=>{D(e)||(e[v]?.[1][H]?.forEach(t=>t[2]?.()),we.get(e.e)?.(),e.p===2&&e.vC?.forEach(t=>t.p=2),e.vC?.forEach(Ge)),e.p||(e.e?.remove(),delete e.e),typeof e.tag=="function"&&(Q.delete(e),se.delete(e),delete e[v][3],e.a=!0)},Se=(e,t,r)=>{e.c=t,We(e,t,r)},Fe=(e,t)=>{if(t){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}},Ue=Symbol(),We=(e,t,r)=>{let n=[],a=[],s=[];qe(e,t,n,a,s),a.forEach(Ge);let o=r?void 0:t.childNodes,c,f=null;if(r)c=-1;else if(!o.length)c=0;else{let l=Fe(o,Tt(e.nN));l!==void 0?(f=o[l],c=l):c=Fe(o,n.find(m=>m.tag!==X&&m.e)?.e)??-1,c===-1&&(r=!0)}for(let l=0,m=n.length;l<m;l++,c++){let i=n[l],d;if(i.s&&i.e)d=i.e,i.s=!1;else{let h=r||!i.e;D(i)?(i.e&&i.d&&(i.e.textContent=i.t),i.d=!1,d=i.e||(i.e=document.createTextNode(i.t))):(d=i.e||(i.e=i.n?document.createElementNS(i.n,i.tag):document.createElement(i.tag)),Rt(d,i.props,i.pP),We(i,d,h))}i.tag===X?c--:r?d.parentNode||t.appendChild(d):o[c]!==d&&o[c-1]!==d&&(o[c+1]===d?t.appendChild(o[c]):t.insertBefore(d,f||o[c]||null))}if(e.pP&&delete e.pP,s.length){let l=[],m=[];s.forEach(([,i,,d,h])=>{i&&l.push(i),d&&m.push(d),h?.()}),l.forEach(i=>i()),m.length&&requestAnimationFrame(()=>{m.forEach(i=>i())})}},Pt=(e,t)=>!!(e&&e.length===t.length&&e.every((r,n)=>r[1]===t[n][1])),se=new WeakMap,oe=(e,t,r)=>{let n=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let a;try{r||(r=typeof t.tag=="function"?At(e,t):be(t.props.children)),r[0]?.tag===""&&r[0][L]&&(a=r[0][L],e[5].push([e,a,t]));let s=n?[...t.pC]:t.vC?[...t.vC]:void 0,o=[],c;for(let f=0;f<r.length;f++){Array.isArray(r[f])&&r.splice(f,1,...r[f].flat());let l=ze(r[f]);if(l){typeof l.tag=="function"&&!l.tag[ee]&&(I.length>0&&(l[v][2]=I.map(i=>[i,i.values.at(-1)])),e[5]?.length&&(l[v][3]=e[5].at(-1)));let m;if(s&&s.length){let i=s.findIndex(D(l)?d=>D(d):l.key!==void 0?d=>d.key===l.key&&d.tag===l.tag:d=>d.tag===l.tag);i!==-1&&(m=s[i],s.splice(i,1))}if(m)if(D(l))m.t!==l.t&&(m.t=l.t,m.d=!0),l=m;else{let i=m.pP=m.props;if(m.props=l.props,m.f||(m.f=l.f||t.f),typeof l.tag=="function"){let d=m[v][2];m[v][2]=l[v][2]||[],m[v][3]=l[v][3],!m.f&&((m.o||m)===l.o||m.tag[te]?.(i,m.props))&&Pt(d,m[v][2])&&(m.s=!0)}l=m}else if(!D(l)&&U){let i=C(U);i&&(l.n=i)}if(!D(l)&&!l.s&&(oe(e,l),delete l.f),o.push(l),c&&!c.s&&!l.s)for(let i=c;i&&!D(i);i=i.vC?.at(-1))i.nN=l;c=l}}t.vR=n?[...t.vC,...s||[]]:s||[],t.vC=o,n&&delete t.pC}catch(s){if(t.f=!0,s===Ue){if(a)return;throw s}let[o,c,f]=t[v]?.[3]||[];if(c){let l=()=>J([0,!1,e[2]],f),m=se.get(f)||[];m.push(l),se.set(f,m);let i=c(s,()=>{let d=se.get(f);if(d){let h=d.indexOf(l);if(h!==-1)return d.splice(h,1),l()}});if(i){if(e[0]===1)e[1]=!0;else if(oe(e,f,[i]),(c.length===1||e!==o)&&f.c){Se(f,f.c,!1);return}throw Ue}}throw s}finally{a&&e[5].pop()}},ze=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[v]=[0,[]];else{let t=Ct[e.tag];t&&(U||(U=G("")),e.props.children=[{tag:U,props:{value:e.n=\`http://www.w3.org/\${t}\`,children:e.props.children}}])}return e}},Qe=(e,t,r)=>{e.c===t&&(e.c=r,e.vC.forEach(n=>Qe(n,t,r)))},He=(e,t)=>{t[v][2]?.forEach(([r,n])=>{r.values.push(n)});try{oe(e,t,void 0)}catch{return}if(t.a){delete t.a;return}t[v][2]?.forEach(([r])=>{r.values.pop()}),(e[0]!==1||!e[1])&&Se(t,t.c,!1)},Q=new WeakMap,Ve=[],J=async(e,t)=>{e[5]||(e[5]=[]);let r=Q.get(t);r&&r[0](void 0);let n,a=new Promise(s=>n=s);if(Q.set(t,[n,()=>{e[2]?e[2](e,t,s=>{He(s,t)}).then(()=>n(t)):(He(e,t),n(t))}]),Ve.length)Ve.at(-1).add(t);else{await Promise.resolve();let s=Q.get(t);s&&(Q.delete(t),s[1]())}return a},Dt=(e,t)=>{let r=[];r[5]=[],r[4]=!0,oe(r,e,void 0),r[4]=!1;let n=document.createDocumentFragment();Se(e,n,!0),Qe(e,n,t),t.replaceChildren(n)},ke=(e,t)=>{Dt(ze({tag:"",props:{children:e}}),t)};var Ce=(e,t,r)=>({tag:X,props:{children:e},key:r,e:t,p:1});var Re=0,H=1,Ae=2,Te=3;var Pe=new WeakMap,De=(e,t)=>!e||!t||e.length!==t.length||t.some((r,n)=>r!==e[n]);var \$t=void 0;var Xe=[];var k=e=>{var o;let t=()=>typeof e=="function"?e():e,r=R.at(-1);if(!r)return[t(),()=>{}];let[,n]=r,a=(o=n[v][1])[Re]||(o[Re]=[]),s=n[v][0]++;return a[s]||(a[s]=[t(),c=>{let f=\$t,l=a[s];if(typeof c=="function"&&(c=c(l[0])),!Object.is(c,l[0]))if(l[0]=c,Xe.length){let[m,i]=Xe.at(-1);Promise.all([m===3?n:J([m,!1,f],n),i]).then(([d])=>{if(!d||!(m===2||m===3))return;let h=d.vC;requestAnimationFrame(()=>{setTimeout(()=>{h===d.vC&&J([m===3?1:0,!1,f],d)})})})}else J([0,!1,f],n)}])};var Lt=(e,t,r)=>{var l;let n=R.at(-1);if(!n)return;let[,a]=n,s=(l=a[v][1])[H]||(l[H]=[]),o=a[v][0]++,[c,,f]=s[o]||(s[o]=[]);if(De(c,r)){f&&f();let m=()=>{i[e]=void 0,i[2]=t()},i=[r,void 0,void 0,void 0,void 0];i[e]=m,s[o]=i}},ie=(e,t)=>Lt(3,e,t);var j=(e,t)=>{var c;let r=R.at(-1);if(!r)return e;let[,n]=r,a=(c=n[v][1])[Ae]||(c[Ae]=[]),s=n[v][0]++,o=a[s];return De(o?.[1],t)?a[s]=[e,t]:e=a[s][0],e};var le=e=>{let t=Pe.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>Pe.set(e,[r]),r=>Pe.set(e,[void 0,r])),e},ce=(e,t)=>{var c;let r=R.at(-1);if(!r)return e();let[,n]=r,a=(c=n[v][1])[Te]||(c[Te]=[]),s=n[v][0]++,o=a[s];return De(o?.[1],t)&&(a[s]=[e(),t]),a[s][0]};var Ze=G({pending:!1,data:null,method:null,action:null}),Je=new Set,Ye=e=>{Je.add(e),e.finally(()=>Je.delete(e))};var Mt=()=>{B=Object.create(null),Z=Object.create(null)},ue=(e,t)=>ce(()=>r=>{let n;e&&(typeof e=="function"?n=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,n=()=>{e.current=null}));let a=t(r);return()=>{a?.(),n?.()}},[e]),B=Object.create(null),Z=Object.create(null),Y=(e,t,r,n,a)=>{if(t?.itemProp)return{tag:e,props:t,type:e,ref:t.ref};let s=document.head,{onLoad:o,onError:c,precedence:f,blocking:l,...m}=t,i=null,d=!1,h=W[e],x;if(h.length>0){let E=s.querySelectorAll(e);e:for(let b of E)for(let g of W[e])if(b.getAttribute(g)===t[g]){i=b;break e}if(!i){let b=h.reduce((g,S)=>t[S]===void 0?g:\`\${g}-\${S}-\${t[S]}\`,e);d=!Z[b],i=Z[b]||(Z[b]=(()=>{let g=document.createElement(e);for(let S of h)t[S]!==void 0&&g.setAttribute(S,t[S]),t.rel&&g.setAttribute("rel",t.rel);return g})())}}else x=s.querySelectorAll(e);f=n?f??"":void 0,n&&(m[z]=f);let y=j(E=>{if(h.length>0){let b=!1;for(let g of s.querySelectorAll(e)){if(b&&g.getAttribute(z)!==f){s.insertBefore(E,g);return}g.getAttribute(z)===f&&(b=!0)}s.appendChild(E)}else if(x){let b=!1;for(let g of x)if(g===E){b=!0;break}b||s.insertBefore(E,s.contains(x[0])?x[0]:s.querySelector(e)),x=void 0}},[f]),A=ue(t.ref,E=>{var S;let b=h[0];if(r===2&&(E.innerHTML=""),(d||x)&&y(E),!c&&!o)return;let g=B[S=E.getAttribute(b)]||(B[S]=new Promise((K,\$)=>{E.addEventListener("load",K),E.addEventListener("error",\$)}));o&&(g=g.then(o)),c&&(g=g.catch(c)),g.catch(()=>{})});if(a&&l==="render"){let E=W[e][0];if(t[E]){let b=t[E],g=B[b]||(B[b]=new Promise((S,K)=>{y(i),i.addEventListener("load",S),i.addEventListener("error",K)}));le(g)}}let p={tag:e,type:e,props:{...m,ref:A},ref:A};return p.p=r,i&&(p.e=i),Ce(p,s)},et=e=>{let t=Ke();return(t&&C(t))?.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:Y("title",e,void 0,!1,!1)},tt=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:Y("script",e,1,!1,!0),rt=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,Y("style",e,2,!0,!0)),nt=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:Y("link",e,1,"precedence"in e,!0),at=e=>Y("meta",e,void 0,!1,!1),st=Symbol(),ot=e=>{let{action:t,...r}=e;typeof t!="function"&&(r.action=t);let[n,a]=k([null,!1]),s=j(async l=>{let m=l.isTrusted?t:l.detail[st];if(typeof m!="function")return;l.preventDefault();let i=new FormData(l.target);a([i,!0]);let d=m(i);d instanceof Promise&&(Ye(d),await d),a([null,!0])},[]),o=ue(e.ref,l=>(l.addEventListener("submit",s),()=>{l.removeEventListener("submit",s)})),[c,f]=n;return n[1]=!1,{tag:Ze,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?t:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f}},it=(e,{formAction:t,...r})=>{if(typeof t=="function"){let n=j(a=>{a.preventDefault(),a.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[st]:t}}))},[]);r.ref=ue(r.ref,a=>(a.addEventListener("click",n),()=>{a.removeEventListener("click",n)}))}return{tag:e,props:r,type:e,ref:r.ref}},lt=e=>it("input",e),ct=e=>it("button",e);Object.assign(ye,{title:et,script:tt,style:rt,link:nt,meta:at,form:ot,input:lt,button:ct});var u=(e,t,r)=>(typeof e=="string"&&fe[e]&&(e=fe[e]),{tag:e,type:e,props:t,key:r,ref:t.ref}),_=e=>u("",e,void 0);var \$e=(({children:e,fallback:t,fallbackRender:r,onError:n})=>{let a=_({children:e});return a[L]=s=>{if(s instanceof Promise)throw s;return n?.(s),r?.(s)||t},a}),Le=(({children:e,fallback:t})=>{let r=_({children:e});return r[L]=(n,a)=>{if(!(n instanceof Promise))throw n;return n.finally(a),t},r});var Me=re(null),Nt=0,ut=async({children:e,fallback:t})=>{Array.isArray(e)||(e=[e]);let r=C(Me)?.scriptNonce,n=[],a={[v]:[0,[]]},s=o=>(R.pop(),o);try{a[v][0]=0,R.push([[],a]),n=e.map(o=>o==null||typeof o=="boolean"?"":o.toString())}catch(o){if(o instanceof Promise)n=[o.then(()=>(a[v][0]=0,R.push([[],a]),me(e).then(s)))];else throw o}finally{s()}if(n.some(o=>o instanceof Promise)){let o=Nt++,c=await t.toString();return w(\`<template id="H:\${o}"></template>\${c}<!--/\$-->\`,[...c.callbacks||[],({phase:f,buffer:l,context:m})=>{if(f!==T.BeforeStream)return Promise.all(n).then(async i=>{i=i.flat();let d=i.join("");l&&(l[0]=l[0].replace(new RegExp(\`<template id="H:\${o}"></template>.*?<!--/\\\$-->\`),d));let h=l?"":\`<template data-hono-target="H:\${o}">\${d}</template><script\${r?\` nonce="\${r}"\`:""}>
((d,c,n) => {
c=d.currentScript.previousSibling
d=d.getElementById('H:\${o}')
if(!d)return
do{n=d.nextSibling;n.remove()}while(n.nodeType!=8||n.nodeValue!='/\$')
d.replaceWith(c.content)
})(document)
<\/script>\`,x=i.map(y=>y.callbacks||[]).flat();return x.length?(f===T.Stream&&(h=await q(h,T.BeforeStream,!0,m)),w(h,x)):h})}])}else return w(n.join(""))};ut[P]=Le;var Pn=new TextEncoder;var Ot=0,me=async e=>{try{return e.flat().map(t=>t==null||typeof t=="boolean"?"":t.toString())}catch(t){if(t instanceof Promise)return await t,me(e);throw t}},ft=async({children:e,fallback:t,fallbackRender:r,onError:n})=>{if(!e)return w("");Array.isArray(e)||(e=[e]);let a=C(Me)?.scriptNonce,s,o=f=>(n?.(f),(s||r?.(f)||"").toString()),c=[];try{c=e.map(f=>f==null||typeof f=="boolean"?"":f.toString())}catch(f){s=await t?.toString(),f instanceof Promise?c=[f.then(()=>me(e)).catch(l=>o(l))]:c=[o(f)]}if(c.some(f=>f instanceof Promise)){s||(s=await t?.toString());let f=Ot++,l=RegExp(\`(<template id="E:\${f}"></template>.*?)(.*?)(<!--E:\${f}-->)\`),m=!1,i=({error:x,buffer:y})=>{if(m)return"";let A=o(x);return y&&(y[0]=y[0].replace(l,A)),y?"":\`<template data-hono-target="E:\${f}">\${A}</template><script>
((d,c,n) => {
c=d.currentScript.previousSibling
d=d.getElementById('E:\${f}')
if(!d)return
do{n=d.nextSibling;n.remove()}while(n.nodeType!=8||n.nodeValue!='E:\${f}')
d.replaceWith(c.content)
})(document)
<\/script>\`},d,h=Promise.all(c).catch(x=>d=x);return w(\`<template id="E:\${f}"></template><!--E:\${f}-->\`,[({phase:x,buffer:y,context:A})=>{if(x!==T.BeforeStream)return h.then(async p=>{if(d)throw d;p=p.flat();let E=p.join(""),b=y?"":\`<template data-hono-target="E:\${f}">\${E}</template><script\${a?\` nonce="\${a}"\`:""}>
((d,c) => {
c=d.currentScript.previousSibling
d=d.getElementById('E:\${f}')
if(!d)return
d.parentElement.insertBefore(c.content,d.nextSibling)
})(document)
<\/script>\`;if(p.every(\$=>!\$.callbacks?.length))return y&&(y[0]=y[0].replace(l,E)),b;y&&(y[0]=y[0].replace(l,(\$,de,M,Ne)=>\`\${de}\${E}\${Ne}\`));let g=p.map(\$=>\$.callbacks||[]).flat();x===T.Stream&&(b=await q(b,T.BeforeStream,!0,A));let S=0,K=g.map(\$=>(...de)=>\$(...de)?.then(M=>(S++,y?(S===g.length&&(y[0]=y[0].replace(l,(Ne,ur,pt)=>pt)),y[0]+=M,w("",M.callbacks)):w(M+(S!==g.length?"":\`<script>
((d,c,n) => {
d=d.getElementById('E:\${f}')
if(!d)return
n=d.nextSibling
while(n.nodeType!=8||n.nodeValue!='E:\${f}'){n=n.nextSibling}
n.remove()
d.remove()
})(document)
<\/script>\`),M.callbacks))).catch(M=>i({error:M,buffer:y})));return w(b,K)}).catch(p=>i({error:p,buffer:y}))}])}else return w(c.join(""))};ft[P]=\$e;var V=()=>{let e=localStorage.getItem("adminKey")||"";return e?{Authorization:\`Bearer \${e}\`}:{}},rr=e=>{if(!e)return"N/A";let[t,r]=e.split("@");return r?\`\${t.length<=2?t[0]+"***":t.slice(0,2)+"***"}@\${r}\`:e},nr=e=>{if(!e)return{text:"Unknown",cls:""};let t=e-Date.now();if(t<=0)return{text:"Expired",cls:"text-red-500"};let r=Math.floor(t/(1e3*60*60)),n=Math.floor(t%(1e3*60*60)/(1e3*60)),a=r>0?\`\${r}h \${n}m\`:\`\${n}m\`,s=t<1800*1e3?"text-amber-500":"text-green-500";return{text:a,cls:s}},ar=e=>{if(!e)return null;let t=e-Date.now();if(t<=0)return"Now";let r=Math.floor(t/(1e3*60*60)),n=Math.floor(t%(1e3*60*60)/(1e3*60)),a=Math.floor(r/24);return a>0?\`\${a}d \${r%24}h\`:r>0?\`\${r}h \${n}m\`:\`\${n}m\`},sr=e=>e===null||e<=0?"bg-red-600":e<=.2?"bg-red-500":e<=.5?"bg-amber-500":"bg-green-500",or=({group:e})=>{let t=e.remainingFraction!==null?Math.round(e.remainingFraction*100):0,r=sr(e.remainingFraction),n=ar(e.resetTimestamp);return u("div",{children:[u("div",{class:"flex justify-between items-center mb-1",children:[u("span",{class:"text-xs text-neutral-300",children:e.displayName}),u("span",{class:"text-xs text-neutral-500",children:[t,"%"]})]}),u("div",{class:"h-2 bg-neutral-800 rounded-full overflow-hidden",children:u("div",{class:\`h-full rounded-full transition-all \${r}\`,style:{width:\`\${t}%\`}})}),n&&u("div",{class:"text-[11px] text-neutral-600 mt-1",children:["Reset: ",n]})]})},mt=({token:e,quota:t,isAdmin:r,onDelete:n})=>{let a=e?.email||t?.email||"",s=r?a:rr(a),o=e?.rateLimitUntil?.gemini,c=e?.rateLimitUntil?.claude,f=o&&Date.now()<o||c&&Date.now()<c,l=e?nr(e.expiresAt):null;return u("div",{class:\`bg-neutral-900 border rounded-lg p-4 mb-3 \${f?"border-amber-500 bg-amber-500/5":"border-neutral-800"}\`,children:[u("div",{class:"flex justify-between items-center mb-3",children:[u("span",{class:"font-semibold text-white text-sm",children:s}),u("div",{class:"flex gap-2",children:[(()=>{if(!e?.tier||e.tier==="unknown")return null;let i=e.tier.toLowerCase().includes("pro")||e.tier==="standard-tier",d=e.tier==="free-tier",h=i?"bg-green-600":d?"bg-blue-600":"bg-neutral-600",x=i?"PRO":d?"FREE":e.tier.toUpperCase();return u("span",{class:\`px-2 py-0.5 rounded text-xs font-semibold text-white \${h}\`,children:x})})(),f&&u("span",{class:"bg-amber-500 text-black px-2 py-0.5 rounded text-xs font-semibold",children:"RATE LIMITED"})]})]}),r&&e&&u("div",{class:"text-xs text-neutral-500 space-y-1",children:[u("div",{class:"flex justify-between",children:[u("span",{children:"Project ID"}),u("span",{children:e.projectId||"N/A"})]}),u("div",{class:"flex justify-between",children:[u("span",{children:"Expires"}),u("span",{class:l?.cls,children:l?.text})]}),e.lastUsed&&u("div",{class:"flex justify-between",children:[u("span",{children:"Last Used"}),u("span",{children:new Date(e.lastUsed).toLocaleTimeString()})]})]}),t?.status==="success"&&t.groups&&u("div",{class:\`space-y-3 \${r&&e?"mt-4":""}\`,children:t.groups.map(i=>u(or,{group:i}))}),t?.status==="error"&&u("div",{class:"text-red-500 text-xs p-2 bg-red-500/10 rounded mt-3",children:t.error||"Failed to fetch quota"}),r&&n&&u("div",{class:"flex gap-2 mt-3",children:u("button",{class:"px-3 py-1.5 text-xs font-medium rounded bg-red-600 hover:bg-red-700 text-white",onClick:()=>n(a),children:"Delete"})})]})},ir=({onLogin:e})=>{let[t,r]=k("");return u("div",{class:"p-5 bg-neutral-900 rounded-lg border border-neutral-800",children:[u("div",{class:"text-xs font-semibold text-neutral-400 uppercase tracking-wide mb-3",children:"Admin Login"}),u("input",{type:"password",value:t,onInput:n=>r(n.target.value),placeholder:"Enter Admin Key",class:"w-full px-3 py-3 rounded-md border border-neutral-700 bg-neutral-950 text-neutral-300 text-sm font-mono focus:outline-none focus:border-blue-500"}),u("button",{class:"w-full mt-3 px-4 py-2.5 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors",onClick:()=>e(t),children:"Login"})]})},lr=({onSuccess:e})=>{let[t,r]=k(""),[n,a]=k(!1),[s,o]=k(""),[c,f]=k(null);return u("div",{class:"p-5 bg-neutral-900 rounded-lg border border-neutral-800 h-fit lg:sticky lg:top-6",children:[u("div",{class:"text-xs font-semibold text-neutral-400 uppercase tracking-wide mb-4",children:"Add Account"}),u("div",{class:"flex gap-3 mb-4",children:[u("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-semibold text-white shrink-0",children:"1"}),u("div",{class:"flex-1",children:[u("p",{class:"text-neutral-400 text-sm mb-2",children:"Generate OAuth URL"}),u("button",{class:"w-full px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 disabled:bg-neutral-700 disabled:cursor-not-allowed text-white text-sm font-medium transition-colors",onClick:async()=>{a(!0);try{let d=await(await fetch("/auth/authorize?redirectUri=http://localhost:9999/",{headers:V()})).json();r(d.url)}catch{f({type:"error",message:"Failed to generate URL"})}a(!1)},disabled:n||!!t,children:n?"Generating...":t?"URL Generated":"Generate Auth URL"}),t&&u(_,{children:[u("div",{class:"mt-2 p-2 bg-neutral-950 border border-neutral-700 rounded-md font-mono text-xs break-all max-h-20 overflow-y-auto",children:t}),u("div",{class:"flex gap-2 mt-2",children:[u("button",{class:"flex-1 px-3 py-1.5 text-xs font-medium rounded bg-neutral-700 hover:bg-neutral-600 text-white transition-colors",onClick:()=>navigator.clipboard.writeText(t),children:"Copy"}),u("button",{class:"flex-1 px-3 py-1.5 text-xs font-medium rounded bg-blue-600 hover:bg-blue-700 text-white transition-colors",onClick:()=>window.open(t,"_blank"),children:"Open"})]})]})]})]}),u("div",{class:"flex gap-3",children:[u("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-semibold text-white shrink-0",children:"2"}),u("div",{class:"flex-1",children:[u("p",{class:"text-neutral-400 text-sm mb-2",children:"Paste callback URL"}),u("textarea",{value:s,onInput:i=>o(i.target.value),placeholder:"http://localhost:9999/?state=...&code=...",class:"w-full px-3 py-2 rounded-md border border-neutral-700 bg-neutral-950 text-neutral-300 text-sm font-mono focus:outline-none focus:border-blue-500 resize-y min-h-16"}),u("button",{class:"w-full mt-2 px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors",onClick:async()=>{if(!s.trim()){f({type:"error",message:"Please paste the callback URL"});return}f(null);try{let i=new URL(s),d=i.searchParams.get("code"),h=i.searchParams.get("state");if(!d||!h){f({type:"error",message:"Invalid URL - missing code or state"});return}let x=await fetch("/auth/callback",{method:"POST",headers:{"Content-Type":"application/json",...V()},body:JSON.stringify({code:d,state:h,redirectUri:"http://localhost:9999/"})}),y=await x.json();x.ok?(f({type:"success",message:\`Added: \${y.email}\`}),o(""),r(""),e()):f({type:"error",message:y.error||"Exchange failed"})}catch(i){f({type:"error",message:\`Error: \${i.message}\`})}},children:"Add Account"}),c&&u("div",{class:\`text-sm mt-2 \${c.type==="success"?"text-green-500":"text-red-500"}\`,children:c.message})]})]})]})},cr=()=>{let[e,t]=k(!!localStorage.getItem("adminKey")),[r,n]=k([]),[a,s]=k([]),[o,c]=k(!0),[f,l]=k(!1),m=async()=>{try{let[p,E]=await Promise.all([fetch("/admin/token/details",{headers:V()}),fetch("/admin/quota",{headers:V()})]),b=p.status!==401;t(b);let g=await E.json();if(s(g.quotas||[]),b&&p.ok){let S=await p.json();n(S.tokens||[])}else n([])}catch{n([]),s([])}c(!1)};ie(()=>{m();let p=setInterval(m,1e4);return()=>clearInterval(p)},[]);let i=p=>{localStorage.setItem("adminKey",p),t(!0),m()},d=()=>{localStorage.removeItem("adminKey"),t(!1),m()},h=async p=>{if(confirm(\`Delete account \${p}?\`))try{(await fetch(\`/admin/token?email=\${encodeURIComponent(p)}\`,{method:"DELETE",headers:V()})).ok?m():alert("Delete failed")}catch{alert("Delete failed")}},x=async()=>{l(!0);try{let p=await fetch("/admin/token/refresh",{method:"POST",headers:V()}),E=await p.json();p.ok?(alert(\`Refreshed \${E.refreshed} token(s)\`),m()):alert(E.error||"Refresh failed")}catch{alert("Refresh failed")}l(!1)},y=Object.fromEntries(a.map(p=>[p.email,p])),A=e?r.length:a.length;return u("div",{class:"max-w-5xl w-full mx-auto",children:[u("div",{class:"flex justify-between items-center mb-6",children:[u("div",{children:[u("h1",{class:"text-2xl font-semibold text-white",children:"Antigravity Auth"}),u("p",{class:"text-neutral-500 text-sm",children:"Multi-account Google OAuth token management"})]}),e&&u("button",{class:"px-3 py-1.5 text-xs font-medium rounded bg-neutral-700 hover:bg-neutral-600 text-white transition-colors",onClick:d,children:"Logout"})]}),u("div",{class:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[u("div",{class:"lg:col-span-3 p-5 bg-neutral-900 rounded-lg border border-neutral-800",children:[u("div",{class:"flex justify-between items-center mb-3",children:[u("div",{class:"text-xs font-semibold text-neutral-400 uppercase tracking-wide",children:"Accounts"}),e&&u("button",{class:"px-3 py-1.5 text-xs font-medium rounded bg-neutral-700 hover:bg-neutral-600 text-white transition-colors disabled:opacity-50",onClick:x,disabled:f,children:f?"Refreshing...":"Refresh All"})]}),o?u("div",{class:"flex items-center gap-2 p-3 rounded-md text-sm bg-blue-500/10 border border-blue-500/30 text-blue-500",children:[u("span",{class:"w-2 h-2 rounded-full bg-current"}),u("span",{children:"Loading..."})]}):u("div",{class:"flex items-center gap-2 p-3 rounded-md text-sm bg-green-500/10 border border-green-500/30 text-green-500",children:[u("span",{class:"w-2 h-2 rounded-full bg-current"}),u("span",{children:[A," account(s) ",e?"configured":"available"]})]}),u("div",{class:"mt-4 max-h-[calc(100vh-280px)] overflow-y-auto",children:e?r.map(p=>u(mt,{token:p,quota:y[p.email],isAdmin:!0,onDelete:h})):a.map(p=>u(mt,{quota:p,isAdmin:!1}))})]}),u("div",{class:"lg:col-span-2 space-y-4",children:[!e&&u(ir,{onLogin:i}),e&&u(lr,{onSuccess:m})]})]})]})},dt=document.getElementById("root");dt&&ke(u(cr,{}),dt);
`
